@model IEnumerable<Shad_BookingApplication.Models.AspNetAgency>
@{
    ViewBag.Title = "AgencyList";
    Layout = "~/Views/Shared/_CompanyAdminNavigationBar.cshtml";
}

<!-- Start: Content-Wrapper -->
<section id="content_wrapper">

    <!-- Start: Topbar-Dropdown -->
    <div id="topbar-dropmenu">
        <div class="topbar-menu row">
            <div class="col-xs-4 col-sm-2">
                <a href="#" class="metro-tile">
                    <span class="metro-icon glyphicon glyphicon-inbox"></span>
                    <p class="metro-title">Messages</p>
                </a>
            </div>
            <div class="col-xs-4 col-sm-2">
                <a href="#" class="metro-tile">
                    <span class="metro-icon glyphicon glyphicon-user"></span>
                    <p class="metro-title">Users</p>
                </a>
            </div>
            <div class="col-xs-4 col-sm-2">
                <a href="#" class="metro-tile">
                    <span class="metro-icon glyphicon glyphicon-headphones"></span>
                    <p class="metro-title">Support</p>
                </a>
            </div>
            <div class="col-xs-4 col-sm-2">
                <a href="#" class="metro-tile">
                    <span class="metro-icon fa fa-gears"></span>
                    <p class="metro-title">Settings</p>
                </a>
            </div>
            <div class="col-xs-4 col-sm-2">
                <a href="#" class="metro-tile">
                    <span class="metro-icon glyphicon glyphicon-facetime-video"></span>
                    <p class="metro-title">Videos</p>
                </a>
            </div>
            <div class="col-xs-4 col-sm-2">
                <a href="#" class="metro-tile">
                    <span class="metro-icon glyphicon glyphicon-picture"></span>
                    <p class="metro-title">Pictures</p>
                </a>
            </div>
        </div>
    </div>
    <!-- End: Topbar-Dropdown -->

    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <h4>CHoose csv format file </h4>
            <input type="file" name="fileinput" accept=".csv"> </input>
            <br><br>

            <center><button type="button" class="btn btn-primary">Done</button></center>
        </div>

    </div>

    <!-- Start: Topbar -->
    <header id="topbar">
        <div class="topbar-left">
            <ol class="breadcrumb">
                <li class="crumb-active">
                    <a href="dashboard.html">Agency List</a>
                </li>
            </ol>
        </div>

        <div class="topbar-right">
            <a href="addAgency.html" class="btn btn-primary" style="height:30px; padding:5px">+ Add Agency</a>
        </div>
    </header>
    <!-- End: Topbar -->
    <!-- Begin: Content -->
    <section id="content" class="table-layout">
        <!-- Start: Header -->
        <!-- End: Header -->

        <div class="col-md-12" style="display: block;">
            <div class="panel panel-visible" id="spy2">
                <div class="panel-heading">
                    <div class="panel-title hidden-xs">
                        <span class="glyphicon glyphicon-tasks"></span>Agency List
                    </div>
                </div>
                <div class="panel-body pn">



                    <div class="panel panel-visible" id="spy3">
                        <div class="panel-body pn">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover" id="datatable2" cellspacing="0" width="100%">
                                    <thead>
                                        <tr role="row">
                                            <th class="sorting_asc" tabindex="0" aria-controls="datatable2" rowspan="1"
                                                colspan="1" aria-sort="ascending"
                                                aria-label="Name: activate to sort column descending" style="width: 10%;">
                                                <center>Agency ID</center>
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable2" rowspan="1" colspan="1"
                                                aria-label="Position: activate to sort column ascending" style="width: 25%;">
                                                <center> Agency Name</center>
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable2" rowspan="1" colspan="1"
                                                aria-label="Office: activate to sort column ascending" style="width: 25%;">
                                                <center> Address</center>
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable2" rowspan="1" colspan="1"
                                                aria-label="Office: activate to sort column ascending" style="width: 5%;">
                                                <center> Agency Manager</center>
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable2" rowspan="1" colspan="1"
                                                aria-label="Age: activate to sort column ascending" style="width: 10%;">
                                                <center> Status</center>
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable2" rowspan="1" colspan="1"
                                                aria-label="Age: activate to sort column ascending" style="width: 15%;">
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="myCustomers">
                                        @{

                                        int val = 1;
                                        foreach (var item in Model)
                                        {

                                            <tr role="row" class="odd">

                                                <td class="sorting_1"><center>@val</center></td>
                                                <td><center>@item.AspNetCustomerDetail.BussinessName</center></td>
                                                <td><center>@item.AspNetCustomerLocation.Address</center></td>
                                                <td><center>@item.AspNetUser.UserName<br> <a>@item.AspNetUser.Email</a><br>@item.AspNetUser.PhoneNumber</center></td>
                                                <td><center><button type="button" class="btn active btn-dark btn-sm" style="background-color: rgb(97,144,126);">Confirmed</button></center></td>
                                                <td><center><div class="btn-group"><a href="@Url.Action("EditAgency", "CompanyAdmin", new { id = item.Id })"><button type="button" class="btn btn-primary" onclick="">Edit</button></a><button type="button" class="btn btn-danger">Delete</button></div></center></td>
                                            </tr>
                                            val++;
                                        }
                                        }
                                    </tbody>

                                </table>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- End: Content -->
    <!-- Begin: Page Footer -->
    <footer id="content-footer" class="affix">
        <div class="row">
            <div class="col-md-6">
                <span class="footer-legal">© 2017 Plateforme RDV</span>
            </div>

        </div>
    </footer>
    <!-- End: Page Footer -->


</section>
<!-- end: Content-Wrapper -->
   <!-- Jquery -->

<script src="@Url.Content("~/vendor/jquery/jquery-1.11.1.min.js")"></script>
<script src="@Url.Content("~/vendor/jquery/jquery_ui/jquery-ui.min.js")"></script>


<script>
// Get the modal
var modal = document.getElementById('myModal');

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal
btn.onclick = function() {
    modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
</script>
<script type="text/javascript">

  function myFunction() {
  var input, filter, table, tr, td, i,j,count=0;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("datatable2");
  tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    for (j = 0; j <4; j++) {

    td = tr[i].getElementsByTagName("td")[j];
    if (td) {
      if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        count++;
       }
    }
    }
    if(count==4)
    {
        tr[i].style.display = "none";

    }
    count=0;
  }
}
